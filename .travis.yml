os:
  - linux  
  - osx

#  This causes Ubuntu 12 to be loaded.  Remove it to get the latest version of Ubuntu
dist: precise

language: c++
python:
  - '2.7'
addons:
  apt:
    packages:
    - perl
    - python-pip
    - python-dev
    - python-numpy
    - libxml2-dev
    - zlib1g-dev
    - libbz2-dev
    - libxslt-dev
    - lib32z1-dev
    - python-lxml
    - libyaml-dev
cache: pip


before_install:
  - source osx_install.sh
  - sudo -H pip install -U pip wheel


env:
  global:
#       FTP_USER
    - secure: "VtilOWEPCAA+QR6mT2+uhlE38sxzjJxhT2pWWibBU0Ujre2S21DIIRv43Z/u3FDkmnbbwO6UC4XjXtQ1sajA91mgMggQGQBTZH7wFOR47Z2O3t5ix2Tlez2Jsk1eNoeR26JzYVf/b8oLgXZb8/CyG5zfMWLF9uCkTRIET3dDPpN+IP4Oc0n+foKrjcKb11+VtUTerpV3b/wSTP/CnLiGw06pVZzQd7WuMgUCqbTkCuyK5s3zZono4ytr9LQTt/vhgvDbNue5LpzetGVuWtFqytJSpgsQLRHzNQLY+sBcPi2C60czxPh4URX1a212LOKeOPrGWd47eECR9UH8Ag5h1OICgLBhhR5E+evD0b3Uua/YFkW9xyMrfWJl2x3XAWLWiGHyGDuzAL7f1gBCK7g8az+i5ynaANmkzYfG1eMbBAz/MVYBktFgcFgFiryIP+rEjIijw5sdoxxxYNNdrrPALN5tYbELWP/NUlwYORIMet3O8MnRS0Y2a4j0OxjJSOjRTaYS7XA9qjr3UBtn693+yRLt1o0QeVL1uFJtdQH3gPPWvhu7VPa3ZVek9+9AKgYzhDzMO94BYXZ+fYWniL52OTzUqCfewSQGZjdM7BGp+nJX8a7vqdWif3r9nou/Vc/2Nt1nOzNf3HgtYbiTMkR1TIij4424Hh+P+T66Vb6PJR0="
#       FTP_PASSWORD    
    - secure: "ZLBPzj3ju2ycmSVka8ul8LSDPO3j66XcHDxYNmkb3M4+Zff5WPkCwzVSgY41LzLnSgi1VPC5n5yO0uJcFvUJu+hi1Zp/1R8dbpIotNOYCm7pGQ1PUSBEY5mKCDBWsK4s/b8IO6Ei2KrK95otefBj2t3DRiiajjxSPXdWCQ7qzVoMVuKpoxsgq4S6COhwI+ifllv01f+0TJ+4aEtj+XMGnSSTOLfXucawYPqpX6fbEiVEcndQlzZTHnLxPayO4nDi3vXw0IkiJvsQTwzi6wkYawzgqX6abkBb6p144gCfslj6ICiMrjEM4VnlnqdTLhZ5feCRpqxJoSgTy5WkIAHVxIb3+EWH0EqAxdzBL1N7GB8/wozi1j4mL8AHdHUJ7v2JKLMKwk/4zMC5MQ2/eY0qhb61lyFLum3ehclLQeRnIv66p6Yx9EUJlj3cXjvVPww0sv0/x/z/aeGawjg5zFa975RK5GzCVwiTrHrrRWHFQAcmhpaLnCQzcPoEePKlZIgfc/aY67gM1Up17bbIeTHFwEEz0ADWlYn6aHPtvvclS48VdD3kFc8DpauDVPfBm9PP2tkI4mQqe1lcdfbXqf9EMYGfzLSAUUgKpaiHgbS65O4U5TWv4ubnKipWCwfae1ReE8MzvCad7eaHPsK+lOSNp+d9OHQa2wVuMEGp7jtXqF0="


#before_deploy:
#- cd dist; python changeFilename.py; cd ..


script: make; make install; make test; cp ./dist/sbmlTranslator ./dist/sbmlTranslator-$TRAVIS_OS_NAME ; source .curl_ftp.sh

#deploy:
# skip_cleanup: true 
 
notifications:
  slack: 
    rooms:    
      - faederlab:tEor7269wGs9ylzYYu7hVGq9#build-results
    template:
      - "Atomizer build: %{result} in %{duration}"
      - "Build: <%{build_url}|#%{build_number}> (<%{compare_url}|%{commit}>) Author: %{author}"      
      - "To download the Atomizer executable, "
      - "Goto: https://rawgit.com/RuleWorld/atomizer/master/.Atomizer_Beta.html"
      - "To package Atomizer, please make a small modification to BioNetGen:"
      - "Goto: https://github.com/RuleWorld/bionetgen"
      - "Build details:  %{build_url} "


#after_success:
#  - perl .make_tar.pl  --platform $TRAVIS_OS_NAME
#  - source .curl_ftp.sh  

 
#    The FTP_USER and FTP_PASSWORD strings are actually defined in the env: global: -secure: strings above.  Those strings
#  Were generated using a program that may be installed on Linux.  Documentation can be found at: https://docs.travis-ci.com/user/encryption-keys/
#  To make a long story short, the program may be installed on Linux with:      gem install travis
#  the command to generate the FTP_PASSWORD string is
#
#              travis encrypt  FTP_USER="password" --skip-version-check -r RuleWorld/nfsim
#
#  The password should be surroundedd by double quotes, and the -r parameter indicates the repository for which the password
#  will be used.
# 
 
 
